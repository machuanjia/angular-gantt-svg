!function(){"use strict";angular.module("gantt",["gantt.tpl"]).directive("gantt",[function(){return{restrict:"E",transclude:!0,templateUrl:"gantt/gantt.html",controller:["$scope","$element","ganttService",function(t,e,a){function r(){h.listWidth=h.list.colList.length*h.colWidth+30,h.listCss={width:h.listWidth+"px"},_.forEach(h.list.colList,function(t,e){t.x=h.listColTextStartX+e*h.colWidth,t.y=h.headerHeight/2+7}),_.forEach(h.list.rowList,function(t,e){t.rectX=0,t.rectY=h.headerHeight+e*h.rowHeight,t.rectWidth="100%",t.rectHeight=h.rowHeight,t.x1=0,t.y1=t.rectY+h.rowHeight,t.x2=h.listWidth,t.y2=t.rectY+h.rowHeight,t.textX=h.listRowTextStartX,t.textY=t.rectY+30})}function i(){switch(h.type){case"day":h.mapHeader={x:0,y:0,x1:0,y1:h.headerHeight,y2:h.headerHeight,height:h.headerHeight,colWidth:80,title:moment().format("YY-MM-DD"),cols:[]};for(var t=0;t<24;t++)h.mapHeader.cols.push(t+":00");break;case"month":alert("month");break;case"year":alert("year")}}function s(){r(),i()}var n=240,h=t.vm={listWidth:240,rowHeight:50,colWidth:80,headerHeight:0,listCss:{width:n+"px"},listColTextStartX:30,listRowTextStartX:30,list:{colList:[{name:"name",display_name:"名称",isStrong:!0},{name:"charger",display_name:"负责人"},{name:"start",display_name:"开始时间"}],rowList:[{name:"任务一",charger:"马传佳",start:"2017-1-1"},{name:"任务一",charger:"马传佳",start:"2017-1-2"},{name:"任务一",charger:"马传佳",start:"2017-1-3"},{name:"任务一",charger:"马传佳",start:"2017-1-4"},{name:"任务一",charger:"马传佳",start:"2017-1-1"},{name:"任务一",charger:"马传佳",start:"2017-1-2"},{name:"任务一",charger:"马传佳",start:"2017-1-3"},{name:"任务一",charger:"马传佳",start:"2017-1-4"},{name:"任务一",charger:"马传佳",start:"2017-1-1"},{name:"任务一",charger:"马传佳",start:"2017-1-2"},{name:"任务一",charger:"马传佳",start:"2017-1-3"},{name:"任务一",charger:"马传佳",start:"2017-1-4"},{name:"任务一",charger:"马传佳",start:"2017-1-1"},{name:"任务一",charger:"马传佳",start:"2017-1-2"},{name:"任务一",charger:"马传佳",start:"2017-1-3"},{name:"任务一",charger:"马传佳",start:"2017-1-4"},{name:"任务一",charger:"马传佳",start:"2017-1-1"},{name:"任务一",charger:"马传佳",start:"2017-1-2"},{name:"任务一",charger:"马传佳",start:"2017-1-3"},{name:"任务一",charger:"马传佳",start:"2017-1-4"}]},pageX:0,flag:!1,type:"day"};h.mouseDown=function(t){h.flag=!0,h.pageX=t.pageX},h.mouseMove=function(t){h.flag&&(h.listWidth=h.listWidth+(t.pageX-h.pageX),h.listWidth>=600&&(h.listWidth=600,h.flag=!1),h.listCss.width=h.listWidth+"px",h.pageX=t.pageX)},h.mouseUp=function(t){h.pageX=t.pageX,h.flag=!1},s()}]}}]).service("ganttService",[function(){}])}();
angular.module("gantt.tpl",[]).run(["$templateCache",function(t){t.put("gantt/gantt.html",'<!--ng-mousedown="vm.mouseDown($event)" ng-mousemove="vm.mouseMove($event)" ng-mouseup="vm.mouseUp($event)"-->\r<div class="gantt-wrap">\r    <div class="gantt-list" ng-style="vm.listCss">\r        <div class="gantt-header" ng-style="vm.listCss">\r            <table class="gantt-header-table">\r            <tr>\r            <td ng-repeat="text in vm.list.colList">\r            {{text.display_name}}\r            </td>\r            </tr>\r            </table>\r        </div>\r        <div class="gantt-list-svg-wrap">\r            <svg class="gantt-list-svg"\r            ng-style="{width:vm.listWidth + \'px\',height:(vm.list.rowList.length * vm.rowHeight + vm.header.height) + \'px\'}">\r            <g ng-repeat="row in vm.list.rowList">\r            <rect class="gantt-row"\r            ng-attr-x="{{row.rectX}}"\r            ng-attr-y="{{row.rectY}}"\r            ng-attr-width="{{row.rectWidth}}"\r            ng-attr-height="{{row.rectHeight}}"></rect>\r\r            <line class="row-line"\r            ng-attr-x1="{{row.x1}}"\r            ng-attr-y1="{{row.y1}}"\r            ng-attr-x2="{{vm.listWidth}}"\r            ng-attr-y2="{{row.y2}}">\r            </line>\r\r            <text ng-repeat="col in vm.list.colList track by $index"\r            ng-attr-x="{{row.textX + $index*80}}"\r            ng-attr-y="{{row.textY}}"\r            class="rol-text" ng-class="{\'true\':\'rol-strong\',false:\'\'}[col.isStrong]">{{row[col.name]}}\r            </text>\r            </g>\r            </svg>\r        </div>\r    </div>\r    <div class="gantt-split"></div>\r    <div class="gantt-map">\r        <div class="gantt-header" ng-style="{width:vm.mapHeader.cols.length * vm.colWidth + \'px\'}">\r            <table class="gantt-header-table">\r            <tr>\r            <td colspan="{{vm.mapHeader.cols.length}}">\r            {{vm.mapHeader.title}}\r            </td>\r            </tr>\r            <tr>\r            <td ng-repeat="col in vm.mapHeader.cols track by $index">\r            {{col}}\r            </td>\r            </tr>\r            </table>\r        </div>\r        <div class="gantt-map-svg-wrap">\r            <svg class="gantt-map-svg"\r            ng-style="{width:vm.mapHeader.cols.length * vm.mapHeader.colWidth + \'px\',height:(vm.list.rowList.length * vm.rowHeight + vm.mapHeader.height) + \'px\'}">\r            <g ng-repeat="row in vm.list.rowList">\r            <rect class="gantt-row"\r            ng-attr-x="{{row.rectX}}"\r            ng-attr-y="{{row.rectY}}"\r            ng-attr-width="{{row.rectWidth}}"\r            ng-attr-height="{{row.rectHeight}}"></rect>\r\r            <line class="row-line"\r            ng-attr-x1="{{row.x1}}"\r            ng-attr-y1="{{row.y1}}"\r            ng-attr-x2="100%"\r            ng-attr-y2="{{row.y2}}">\r            </line>\r            </g>\r            </svg>\r        </div>\r    </div>\r</div>\r\r\r\r\r\r\r\r')}]);